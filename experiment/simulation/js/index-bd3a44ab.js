var $e=Object.defineProperty;var ke=(t,n,e)=>n in t?$e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var $n=(t,n,e)=>(ke(t,typeof n!="symbol"?n+"":n,e),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var Ce={value:()=>{}};function hn(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Mt(e)}function Mt(t){this._=t}function Ne(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}Mt.prototype=hn.prototype={constructor:Mt,on:function(t,n){var e=this._,r=Ne(t+"",e),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Ie(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(i=(t=r[o]).type)e[i]=kn(e[i],t.name,n);else if(n==null)for(i in e)e[i]=kn(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Mt(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Ie(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function kn(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Ce,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var tn="http://www.w3.org/1999/xhtml";const Cn={svg:"http://www.w3.org/2000/svg",xhtml:tn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yt(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Cn.hasOwnProperty(n)?{space:Cn[n],local:t}:t}function Pe(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===tn&&n.documentElement.namespaceURI===tn?n.createElement(t):n.createElementNS(e,t)}}function Ae(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function zn(t){var n=Yt(t);return(n.local?Ae:Pe)(n)}function Me(){}function dn(t){return t==null?Me:function(){return this.querySelector(t)}}function Le(t){typeof t!="function"&&(t=dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,c=r[i]=new Array(s),a,l,u=0;u<s;++u)(a=o[u])&&(l=t.call(a,a.__data__,u,o))&&("__data__"in a&&(l.__data__=a.__data__),c[u]=l);return new $(r,this._parents)}function Se(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Te(){return[]}function Kn(t){return t==null?Te:function(){return this.querySelectorAll(t)}}function Be(t){return function(){return Se(t.apply(this,arguments))}}function Re(t){typeof t=="function"?t=Be(t):t=Kn(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var s=n[o],c=s.length,a,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new $(r,i)}function Wn(t){return function(){return this.matches(t)}}function Zn(t){return function(n){return n.matches(t)}}var De=Array.prototype.find;function Ge(t){return function(){return De.call(this.children,t)}}function He(){return this.firstElementChild}function Xe(t){return this.select(t==null?He:Ge(typeof t=="function"?t:Zn(t)))}var Oe=Array.prototype.filter;function Ve(){return Array.from(this.children)}function Ye(t){return function(){return Oe.call(this.children,t)}}function Fe(t){return this.selectAll(t==null?Ve:Ye(typeof t=="function"?t:Zn(t)))}function qe(t){typeof t!="function"&&(t=Wn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,c=r[i]=[],a,l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new $(r,this._parents)}function Qn(t){return new Array(t.length)}function Ue(){return new $(this._enter||this._groups.map(Qn),this._parents)}function Dt(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Dt.prototype={constructor:Dt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ze(t){return function(){return t}}function Ke(t,n,e,r,i,o){for(var s=0,c,a=n.length,l=o.length;s<l;++s)(c=n[s])?(c.__data__=o[s],r[s]=c):e[s]=new Dt(t,o[s]);for(;s<a;++s)(c=n[s])&&(i[s]=c)}function We(t,n,e,r,i,o,s){var c,a,l=new Map,u=n.length,h=o.length,f=new Array(u),g;for(c=0;c<u;++c)(a=n[c])&&(f[c]=g=s.call(a,a.__data__,c,n)+"",l.has(g)?i[c]=a:l.set(g,a));for(c=0;c<h;++c)g=s.call(t,o[c],c,o)+"",(a=l.get(g))?(r[c]=a,a.__data__=o[c],l.delete(g)):e[c]=new Dt(t,o[c]);for(c=0;c<u;++c)(a=n[c])&&l.get(f[c])===a&&(i[c]=a)}function Ze(t){return t.__data__}function Qe(t,n){if(!arguments.length)return Array.from(this,Ze);var e=n?We:Ke,r=this._parents,i=this._groups;typeof t!="function"&&(t=ze(t));for(var o=i.length,s=new Array(o),c=new Array(o),a=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],f=h.length,g=Je(t.call(u,u&&u.__data__,l,r)),y=g.length,_=c[l]=new Array(y),I=s[l]=new Array(y),Z=a[l]=new Array(f);e(u,h,_,I,Z,g,n);for(var M=0,L=0,d,m;M<y;++M)if(d=_[M]){for(M>=L&&(L=M+1);!(m=I[L])&&++L<y;);d._next=m||null}}return s=new $(s,r),s._enter=c,s._exit=a,s}function Je(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function je(){return new $(this._exit||this._groups.map(Qn),this._parents)}function tr(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function nr(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,s=Math.min(i,o),c=new Array(i),a=0;a<s;++a)for(var l=e[a],u=r[a],h=l.length,f=c[a]=new Array(h),g,y=0;y<h;++y)(g=l[y]||u[y])&&(f[y]=g);for(;a<i;++a)c[a]=e[a];return new $(c,this._parents)}function er(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function rr(t){t||(t=ir);function n(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var s=e[o],c=s.length,a=i[o]=new Array(c),l,u=0;u<c;++u)(l=s[u])&&(a[u]=l);a.sort(n)}return new $(i,this._parents).order()}function ir(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function or(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function sr(){return Array.from(this)}function cr(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function ar(){let t=0;for(const n of this)++t;return t}function lr(){return!this.node()}function ur(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,s=i.length,c;o<s;++o)(c=i[o])&&t.call(c,c.__data__,o,i);return this}function fr(t){return function(){this.removeAttribute(t)}}function hr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dr(t,n){return function(){this.setAttribute(t,n)}}function pr(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function gr(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function mr(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function yr(t,n){var e=Yt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?hr:fr:typeof n=="function"?e.local?mr:gr:e.local?pr:dr)(e,n))}function Jn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _r(t){return function(){this.style.removeProperty(t)}}function xr(t,n,e){return function(){this.style.setProperty(t,n,e)}}function wr(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function vr(t,n,e){return arguments.length>1?this.each((n==null?_r:typeof n=="function"?wr:xr)(t,n,e??"")):nt(this.node(),t)}function nt(t,n){return t.style.getPropertyValue(n)||Jn(t).getComputedStyle(t,null).getPropertyValue(n)}function br(t){return function(){delete this[t]}}function Er(t,n){return function(){this[t]=n}}function $r(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function kr(t,n){return arguments.length>1?this.each((n==null?br:typeof n=="function"?$r:Er)(t,n)):this.node()[t]}function jn(t){return t.trim().split(/^|\s+/)}function pn(t){return t.classList||new te(t)}function te(t){this._node=t,this._names=jn(t.getAttribute("class")||"")}te.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ne(t,n){for(var e=pn(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function ee(t,n){for(var e=pn(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Cr(t){return function(){ne(this,t)}}function Nr(t){return function(){ee(this,t)}}function Ir(t,n){return function(){(n.apply(this,arguments)?ne:ee)(this,t)}}function Pr(t,n){var e=jn(t+"");if(arguments.length<2){for(var r=pn(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Ir:n?Cr:Nr)(e,n))}function Ar(){this.textContent=""}function Mr(t){return function(){this.textContent=t}}function Lr(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Sr(t){return arguments.length?this.each(t==null?Ar:(typeof t=="function"?Lr:Mr)(t)):this.node().textContent}function Tr(){this.innerHTML=""}function Br(t){return function(){this.innerHTML=t}}function Rr(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Dr(t){return arguments.length?this.each(t==null?Tr:(typeof t=="function"?Rr:Br)(t)):this.node().innerHTML}function Gr(){this.nextSibling&&this.parentNode.appendChild(this)}function Hr(){return this.each(Gr)}function Xr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Or(){return this.each(Xr)}function Vr(t){var n=typeof t=="function"?t:zn(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Yr(){return null}function Fr(t,n){var e=typeof t=="function"?t:zn(t),r=n==null?Yr:typeof n=="function"?n:dn(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function qr(){var t=this.parentNode;t&&t.removeChild(this)}function Ur(){return this.each(qr)}function zr(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Kr(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Wr(t){return this.select(t?Kr:zr)}function Zr(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Qr(t){return function(n){t.call(this,n,this.__data__)}}function Jr(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function jr(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function ti(t,n,e){return function(){var r=this.__on,i,o=Qr(n);if(r){for(var s=0,c=r.length;s<c;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function ni(t,n,e){var r=Jr(t+""),i,o=r.length,s;if(arguments.length<2){var c=this.node().__on;if(c){for(var a=0,l=c.length,u;a<l;++a)for(i=0,u=c[a];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(c=n?ti:jr,i=0;i<o;++i)this.each(c(r[i],n,e));return this}function re(t,n,e){var r=Jn(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function ei(t,n){return function(){return re(this,t,n)}}function ri(t,n){return function(){return re(this,t,n.apply(this,arguments))}}function ii(t,n){return this.each((typeof n=="function"?ri:ei)(t,n))}function*oi(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var ie=[null];function $(t,n){this._groups=t,this._parents=n}function _t(){return new $([[document.documentElement]],ie)}function si(){return this}$.prototype=_t.prototype={constructor:$,select:Le,selectAll:Re,selectChild:Xe,selectChildren:Fe,filter:qe,data:Qe,enter:Ue,exit:je,join:tr,merge:nr,selection:si,order:er,sort:rr,call:or,nodes:sr,node:cr,size:ar,empty:lr,each:ur,attr:yr,style:vr,property:kr,classed:Pr,text:Sr,html:Dr,raise:Hr,lower:Or,append:Vr,insert:Fr,remove:Ur,clone:Wr,datum:Zr,on:ni,dispatch:ii,[Symbol.iterator]:oi};function b(t){return typeof t=="string"?new $([[document.querySelector(t)]],[document.documentElement]):new $([[t]],ie)}function ci(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Nn(t,n){if(t=ci(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}}return[t.pageX,t.pageY]}const ai={passive:!1},ht={capture:!0,passive:!1};function Kt(t){t.stopImmediatePropagation()}function j(t){t.preventDefault(),t.stopImmediatePropagation()}function li(t){var n=t.document.documentElement,e=b(t).on("dragstart.drag",j,ht);"onselectstart"in n?e.on("selectstart.drag",j,ht):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ui(t,n){var e=t.document.documentElement,r=b(t).on("dragstart.drag",null);n&&(r.on("click.drag",j,ht),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const Et=t=>()=>t;function nn(t,{sourceEvent:n,subject:e,target:r,identifier:i,active:o,x:s,y:c,dx:a,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}nn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function fi(t){return!t.ctrlKey&&!t.button}function hi(){return this.parentNode}function di(t,n){return n??{x:t.x,y:t.y}}function pi(){return navigator.maxTouchPoints||"ontouchstart"in this}function gi(){var t=fi,n=hi,e=di,r=pi,i={},o=hn("start","drag","end"),s=0,c,a,l,u,h=0;function f(d){d.on("mousedown.drag",g).filter(r).on("touchstart.drag",I).on("touchmove.drag",Z,ai).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(d,m){if(!(u||!t.call(this,d,m))){var w=L(this,n.call(this,d,m),d,m,"mouse");w&&(b(d.view).on("mousemove.drag",y,ht).on("mouseup.drag",_,ht),li(d.view),Kt(d),l=!1,c=d.clientX,a=d.clientY,w("start",d))}}function y(d){if(j(d),!l){var m=d.clientX-c,w=d.clientY-a;l=m*m+w*w>h}i.mouse("drag",d)}function _(d){b(d.view).on("mousemove.drag mouseup.drag",null),ui(d.view,l),j(d),i.mouse("end",d)}function I(d,m){if(t.call(this,d,m)){var w=d.changedTouches,v=n.call(this,d,m),k=w.length,O,Q;for(O=0;O<k;++O)(Q=L(this,v,d,m,w[O].identifier,w[O]))&&(Kt(d),Q("start",d,w[O]))}}function Z(d){var m=d.changedTouches,w=m.length,v,k;for(v=0;v<w;++v)(k=i[m[v].identifier])&&(j(d),k("drag",d,m[v]))}function M(d){var m=d.changedTouches,w=m.length,v,k;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),v=0;v<w;++v)(k=i[m[v].identifier])&&(Kt(d),k("end",d,m[v]))}function L(d,m,w,v,k,O){var Q=o.copy(),S=Nn(O||w,m),wn,vn,bt;if((bt=e.call(d,new nn("beforestart",{sourceEvent:w,target:f,identifier:k,active:s,x:S[0],y:S[1],dx:0,dy:0,dispatch:Q}),v))!=null)return wn=bt.x-S[0]||0,vn=bt.y-S[1]||0,function be(Ut,bn,Ee){var En=S,zt;switch(Ut){case"start":i[k]=be,zt=s++;break;case"end":delete i[k],--s;case"drag":S=Nn(Ee||bn,m),zt=s;break}Q.call(Ut,d,new nn(Ut,{sourceEvent:bn,subject:bt,target:f,identifier:k,active:zt,x:S[0]+wn,y:S[1]+vn,dx:S[0]-En[0],dy:S[1]-En[1],dispatch:Q}),v)}}return f.filter=function(d){return arguments.length?(t=typeof d=="function"?d:Et(!!d),f):t},f.container=function(d){return arguments.length?(n=typeof d=="function"?d:Et(d),f):n},f.subject=function(d){return arguments.length?(e=typeof d=="function"?d:Et(d),f):e},f.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:Et(!!d),f):r},f.on=function(){var d=o.on.apply(o,arguments);return d===o?f:d},f.clickDistance=function(d){return arguments.length?(h=(d=+d)*d,f):Math.sqrt(h)},f}function gn(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function oe(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function xt(){}var dt=.7,Gt=1/dt,tt="\\s*([+-]?\\d+)\\s*",pt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",B="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mi=/^#([0-9a-f]{3,8})$/,yi=new RegExp(`^rgb\\(${tt},${tt},${tt}\\)$`),_i=new RegExp(`^rgb\\(${B},${B},${B}\\)$`),xi=new RegExp(`^rgba\\(${tt},${tt},${tt},${pt}\\)$`),wi=new RegExp(`^rgba\\(${B},${B},${B},${pt}\\)$`),vi=new RegExp(`^hsl\\(${pt},${B},${B}\\)$`),bi=new RegExp(`^hsla\\(${pt},${B},${B},${pt}\\)$`),In={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gn(xt,gt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Pn,formatHex:Pn,formatHex8:Ei,formatHsl:$i,formatRgb:An,toString:An});function Pn(){return this.rgb().formatHex()}function Ei(){return this.rgb().formatHex8()}function $i(){return se(this).formatHsl()}function An(){return this.rgb().formatRgb()}function gt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=mi.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Mn(n):e===3?new E(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?$t(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?$t(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=yi.exec(t))?new E(n[1],n[2],n[3],1):(n=_i.exec(t))?new E(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=xi.exec(t))?$t(n[1],n[2],n[3],n[4]):(n=wi.exec(t))?$t(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=vi.exec(t))?Tn(n[1],n[2]/100,n[3]/100,1):(n=bi.exec(t))?Tn(n[1],n[2]/100,n[3]/100,n[4]):In.hasOwnProperty(t)?Mn(In[t]):t==="transparent"?new E(NaN,NaN,NaN,0):null}function Mn(t){return new E(t>>16&255,t>>8&255,t&255,1)}function $t(t,n,e,r){return r<=0&&(t=n=e=NaN),new E(t,n,e,r)}function ki(t){return t instanceof xt||(t=gt(t)),t?(t=t.rgb(),new E(t.r,t.g,t.b,t.opacity)):new E}function en(t,n,e,r){return arguments.length===1?ki(t):new E(t,n,e,r??1)}function E(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}gn(E,en,oe(xt,{brighter(t){return t=t==null?Gt:Math.pow(Gt,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new E(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new E(K(this.r),K(this.g),K(this.b),Ht(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ln,formatHex:Ln,formatHex8:Ci,formatRgb:Sn,toString:Sn}));function Ln(){return`#${z(this.r)}${z(this.g)}${z(this.b)}`}function Ci(){return`#${z(this.r)}${z(this.g)}${z(this.b)}${z((isNaN(this.opacity)?1:this.opacity)*255)}`}function Sn(){const t=Ht(this.opacity);return`${t===1?"rgb(":"rgba("}${K(this.r)}, ${K(this.g)}, ${K(this.b)}${t===1?")":`, ${t})`}`}function Ht(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function K(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function z(t){return t=K(t),(t<16?"0":"")+t.toString(16)}function Tn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new P(t,n,e,r)}function se(t){if(t instanceof P)return new P(t.h,t.s,t.l,t.opacity);if(t instanceof xt||(t=gt(t)),!t)return new P;if(t instanceof P)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),s=NaN,c=o-i,a=(o+i)/2;return c?(n===o?s=(e-r)/c+(e<r)*6:e===o?s=(r-n)/c+2:s=(n-e)/c+4,c/=a<.5?o+i:2-o-i,s*=60):c=a>0&&a<1?0:s,new P(s,c,a,t.opacity)}function Ni(t,n,e,r){return arguments.length===1?se(t):new P(t,n,e,r??1)}function P(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}gn(P,Ni,oe(xt,{brighter(t){return t=t==null?Gt:Math.pow(Gt,t),new P(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dt:Math.pow(dt,t),new P(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new E(Wt(t>=240?t-240:t+120,i,r),Wt(t,i,r),Wt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new P(Bn(this.h),kt(this.s),kt(this.l),Ht(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ht(this.opacity);return`${t===1?"hsl(":"hsla("}${Bn(this.h)}, ${kt(this.s)*100}%, ${kt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Bn(t){return t=(t||0)%360,t<0?t+360:t}function kt(t){return Math.max(0,Math.min(1,t||0))}function Wt(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const ce=t=>()=>t;function Ii(t,n){return function(e){return t+e*n}}function Pi(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Ai(t){return(t=+t)==1?ae:function(n,e){return e-n?Pi(n,e,t):ce(isNaN(n)?e:n)}}function ae(t,n){var e=n-t;return e?Ii(t,e):ce(isNaN(t)?n:t)}const Rn=function t(n){var e=Ai(n);function r(i,o){var s=e((i=en(i)).r,(o=en(o)).r),c=e(i.g,o.g),a=e(i.b,o.b),l=ae(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=c(u),i.b=a(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function V(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zt=new RegExp(rn.source,"g");function Mi(t){return function(){return t}}function Li(t){return function(n){return t(n)+""}}function Si(t,n){var e=rn.lastIndex=Zt.lastIndex=0,r,i,o,s=-1,c=[],a=[];for(t=t+"",n=n+"";(r=rn.exec(t))&&(i=Zt.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),c[s]?c[s]+=o:c[++s]=o),(r=r[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,a.push({i:s,x:V(r,i)})),e=Zt.lastIndex;return e<n.length&&(o=n.slice(e),c[s]?c[s]+=o:c[++s]=o),c.length<2?a[0]?Li(a[0].x):Mi(n):(n=a.length,function(l){for(var u=0,h;u<n;++u)c[(h=a[u]).i]=h.x(l);return c.join("")})}var Dn=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function le(t,n,e,r,i,o){var s,c,a;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(a=t*e+n*r)&&(e-=t*a,r-=n*a),(c=Math.sqrt(e*e+r*r))&&(e/=c,r/=c,a/=c),t*r<n*e&&(t=-t,n=-n,a=-a,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Dn,skewX:Math.atan(a)*Dn,scaleX:s,scaleY:c}}var Ct;function Ti(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?on:le(n.a,n.b,n.c,n.d,n.e,n.f)}function Bi(t){return t==null||(Ct||(Ct=document.createElementNS("http://www.w3.org/2000/svg","g")),Ct.setAttribute("transform",t),!(t=Ct.transform.baseVal.consolidate()))?on:(t=t.matrix,le(t.a,t.b,t.c,t.d,t.e,t.f))}function ue(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,h,f,g,y){if(l!==h||u!==f){var _=g.push("translate(",null,n,null,e);y.push({i:_-4,x:V(l,h)},{i:_-2,x:V(u,f)})}else(h||f)&&g.push("translate("+h+n+f+e)}function s(l,u,h,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:V(l,u)})):u&&h.push(i(h)+"rotate("+u+r)}function c(l,u,h,f){l!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:V(l,u)}):u&&h.push(i(h)+"skewX("+u+r)}function a(l,u,h,f,g,y){if(l!==h||u!==f){var _=g.push(i(g)+"scale(",null,",",null,")");y.push({i:_-4,x:V(l,h)},{i:_-2,x:V(u,f)})}else(h!==1||f!==1)&&g.push(i(g)+"scale("+h+","+f+")")}return function(l,u){var h=[],f=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,h,f),s(l.rotate,u.rotate,h,f),c(l.skewX,u.skewX,h,f),a(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,f),l=u=null,function(g){for(var y=-1,_=f.length,I;++y<_;)h[(I=f[y]).i]=I.x(g);return h.join("")}}}var Ri=ue(Ti,"px, ","px)","deg)"),Di=ue(Bi,", ",")",")"),et=0,it=0,rt=0,fe=1e3,Xt,ot,Ot=0,W=0,Ft=0,mt=typeof performance=="object"&&performance.now?performance:Date,he=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function mn(){return W||(he(Gi),W=mt.now()+Ft)}function Gi(){W=0}function Vt(){this._call=this._time=this._next=null}Vt.prototype=de.prototype={constructor:Vt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?mn():+e)+(n==null?0:+n),!this._next&&ot!==this&&(ot?ot._next=this:Xt=this,ot=this),this._call=t,this._time=e,sn()},stop:function(){this._call&&(this._call=null,this._time=1/0,sn())}};function de(t,n,e){var r=new Vt;return r.restart(t,n,e),r}function Hi(){mn(),++et;for(var t=Xt,n;t;)(n=W-t._time)>=0&&t._call.call(void 0,n),t=t._next;--et}function Gn(){W=(Ot=mt.now())+Ft,et=it=0;try{Hi()}finally{et=0,Oi(),W=0}}function Xi(){var t=mt.now(),n=t-Ot;n>fe&&(Ft-=n,Ot=t)}function Oi(){for(var t,n=Xt,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Xt=e);ot=t,sn(r)}function sn(t){if(!et){it&&(it=clearTimeout(it));var n=t-W;n>24?(t<1/0&&(it=setTimeout(Gn,t-mt.now()-Ft)),rt&&(rt=clearInterval(rt))):(rt||(Ot=mt.now(),rt=setInterval(Xi,fe)),et=1,he(Gn))}}function Hn(t,n,e){var r=new Vt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var Vi=hn("start","end","cancel","interrupt"),Yi=[],pe=0,Xn=1,cn=2,Lt=3,On=4,an=5,St=6;function qt(t,n,e,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;Fi(t,e,{name:n,index:r,group:i,on:Vi,tween:Yi,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:pe})}function yn(t,n){var e=A(t,n);if(e.state>pe)throw new Error("too late; already scheduled");return e}function R(t,n){var e=A(t,n);if(e.state>Lt)throw new Error("too late; already running");return e}function A(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Fi(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=de(o,0,e.time);function o(l){e.state=Xn,e.timer.restart(s,e.delay,e.time),e.delay<=l&&s(l-e.delay)}function s(l){var u,h,f,g;if(e.state!==Xn)return a();for(u in r)if(g=r[u],g.name===e.name){if(g.state===Lt)return Hn(s);g.state===On?(g.state=St,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<n&&(g.state=St,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(Hn(function(){e.state===Lt&&(e.state=On,e.timer.restart(c,e.delay,e.time),c(l))}),e.state=cn,e.on.call("start",t,t.__data__,e.index,e.group),e.state===cn){for(e.state=Lt,i=new Array(f=e.tween.length),u=0,h=-1;u<f;++u)(g=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(i[++h]=g);i.length=h+1}}function c(l){for(var u=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(a),e.state=an,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);e.state===an&&(e.on.call("end",t,t.__data__,e.index,e.group),a())}function a(){e.state=St,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function qi(t,n){var e=t.__transition,r,i,o=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((r=e[s]).name!==n){o=!1;continue}i=r.state>cn&&r.state<an,r.state=St,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[s]}o&&delete t.__transition}}function Ui(t){return this.each(function(){qi(this,t)})}function zi(t,n){var e,r;return function(){var i=R(this,t),o=i.tween;if(o!==e){r=e=o;for(var s=0,c=r.length;s<c;++s)if(r[s].name===n){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ki(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=R(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var c={name:n,value:e},a=0,l=i.length;a<l;++a)if(i[a].name===n){i[a]=c;break}a===l&&i.push(c)}o.tween=i}}function Wi(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=A(this.node(),e).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((n==null?zi:Ki)(e,t,n))}function _n(t,n,e){var r=t._id;return t.each(function(){var i=R(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return A(i,r).value[n]}}function ge(t,n){var e;return(typeof n=="number"?V:n instanceof gt?Rn:(e=gt(n))?(n=e,Rn):Si)(t,n)}function Zi(t){return function(){this.removeAttribute(t)}}function Qi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ji(t,n,e){var r,i=e+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=n(r=s,e)}}function ji(t,n,e){var r,i=e+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=n(r=s,e)}}function to(t,n,e){var r,i,o;return function(){var s,c=e(this),a;return c==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=c+"",s===a?null:s===r&&a===i?o:(i=a,o=n(r=s,c)))}}function no(t,n,e){var r,i,o;return function(){var s,c=e(this),a;return c==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=c+"",s===a?null:s===r&&a===i?o:(i=a,o=n(r=s,c)))}}function eo(t,n){var e=Yt(t),r=e==="transform"?Di:ge;return this.attrTween(t,typeof n=="function"?(e.local?no:to)(e,r,_n(this,"attr."+t,n)):n==null?(e.local?Qi:Zi)(e):(e.local?ji:Ji)(e,r,n))}function ro(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function io(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function oo(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&io(t,o)),e}return i._value=n,i}function so(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ro(t,o)),e}return i._value=n,i}function co(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Yt(t);return this.tween(e,(r.local?oo:so)(r,n))}function ao(t,n){return function(){yn(this,t).delay=+n.apply(this,arguments)}}function lo(t,n){return n=+n,function(){yn(this,t).delay=n}}function uo(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?ao:lo)(n,t)):A(this.node(),n).delay}function fo(t,n){return function(){R(this,t).duration=+n.apply(this,arguments)}}function ho(t,n){return n=+n,function(){R(this,t).duration=n}}function po(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?fo:ho)(n,t)):A(this.node(),n).duration}function go(t,n){if(typeof n!="function")throw new Error;return function(){R(this,t).ease=n}}function mo(t){var n=this._id;return arguments.length?this.each(go(n,t)):A(this.node(),n).ease}function yo(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;R(this,t).ease=e}}function _o(t){if(typeof t!="function")throw new Error;return this.each(yo(this._id,t))}function xo(t){typeof t!="function"&&(t=Wn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],s=o.length,c=r[i]=[],a,l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&c.push(a);return new X(r,this._parents,this._name,this._id)}function wo(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),s=new Array(r),c=0;c<o;++c)for(var a=n[c],l=e[c],u=a.length,h=s[c]=new Array(u),f,g=0;g<u;++g)(f=a[g]||l[g])&&(h[g]=f);for(;c<r;++c)s[c]=n[c];return new X(s,this._parents,this._name,this._id)}function vo(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function bo(t,n,e){var r,i,o=vo(n)?yn:R;return function(){var s=o(this,t),c=s.on;c!==r&&(i=(r=c).copy()).on(n,e),s.on=i}}function Eo(t,n){var e=this._id;return arguments.length<2?A(this.node(),e).on.on(t):this.each(bo(e,t,n))}function $o(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function ko(){return this.on("end.remove",$o(this._id))}function Co(t){var n=this._name,e=this._id;typeof t!="function"&&(t=dn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var c=r[s],a=c.length,l=o[s]=new Array(a),u,h,f=0;f<a;++f)(u=c[f])&&(h=t.call(u,u.__data__,f,c))&&("__data__"in u&&(h.__data__=u.__data__),l[f]=h,qt(l[f],n,e,f,l,A(u,e)));return new X(o,this._parents,n,e)}function No(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Kn(t));for(var r=this._groups,i=r.length,o=[],s=[],c=0;c<i;++c)for(var a=r[c],l=a.length,u,h=0;h<l;++h)if(u=a[h]){for(var f=t.call(u,u.__data__,h,a),g,y=A(u,e),_=0,I=f.length;_<I;++_)(g=f[_])&&qt(g,n,e,_,f,y);o.push(f),s.push(u)}return new X(o,s,n,e)}var Io=_t.prototype.constructor;function Po(){return new Io(this._groups,this._parents)}function Ao(t,n){var e,r,i;return function(){var o=nt(this,t),s=(this.style.removeProperty(t),nt(this,t));return o===s?null:o===e&&s===r?i:i=n(e=o,r=s)}}function me(t){return function(){this.style.removeProperty(t)}}function Mo(t,n,e){var r,i=e+"",o;return function(){var s=nt(this,t);return s===i?null:s===r?o:o=n(r=s,e)}}function Lo(t,n,e){var r,i,o;return function(){var s=nt(this,t),c=e(this),a=c+"";return c==null&&(a=c=(this.style.removeProperty(t),nt(this,t))),s===a?null:s===r&&a===i?o:(i=a,o=n(r=s,c))}}function So(t,n){var e,r,i,o="style."+n,s="end."+o,c;return function(){var a=R(this,t),l=a.on,u=a.value[o]==null?c||(c=me(n)):void 0;(l!==e||i!==u)&&(r=(e=l).copy()).on(s,i=u),a.on=r}}function To(t,n,e){var r=(t+="")=="transform"?Ri:ge;return n==null?this.styleTween(t,Ao(t,r)).on("end.style."+t,me(t)):typeof n=="function"?this.styleTween(t,Lo(t,r,_n(this,"style."+t,n))).each(So(this._id,t)):this.styleTween(t,Mo(t,r,n),e).on("end.style."+t,null)}function Bo(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Ro(t,n,e){var r,i;function o(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&Bo(t,s,e)),r}return o._value=n,o}function Do(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Ro(t,n,e??""))}function Go(t){return function(){this.textContent=t}}function Ho(t){return function(){var n=t(this);this.textContent=n??""}}function Xo(t){return this.tween("text",typeof t=="function"?Ho(_n(this,"text",t)):Go(t==null?"":t+""))}function Oo(t){return function(n){this.textContent=t.call(this,n)}}function Vo(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Oo(i)),n}return r._value=t,r}function Yo(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Vo(t))}function Fo(){for(var t=this._name,n=this._id,e=ye(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],c=s.length,a,l=0;l<c;++l)if(a=s[l]){var u=A(a,n);qt(a,t,e,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new X(r,this._parents,t,e)}function qo(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,s){var c={value:s},a={value:function(){--i===0&&o()}};e.each(function(){var l=R(this,r),u=l.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(a)),l.on=n}),i===0&&o()})}var Uo=0;function X(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function ye(){return++Uo}var D=_t.prototype;X.prototype={constructor:X,select:Co,selectAll:No,selectChild:D.selectChild,selectChildren:D.selectChildren,filter:xo,merge:wo,selection:Po,transition:Fo,call:D.call,nodes:D.nodes,node:D.node,size:D.size,empty:D.empty,each:D.each,on:Eo,attr:eo,attrTween:co,style:To,styleTween:Do,text:Xo,textTween:Yo,remove:ko,tween:Wi,delay:uo,duration:po,ease:mo,easeVarying:_o,end:qo,[Symbol.iterator]:D[Symbol.iterator]};function zo(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ko={time:null,delay:0,duration:250,ease:zo};function Wo(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function Zo(t){var n,e;t instanceof X?(n=t._id,t=t._name):(n=ye(),(e=Ko).time=mn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],c=s.length,a,l=0;l<c;++l)(a=s[l])&&qt(a,t,n,l,s,e||Wo(a,n));return new X(r,this._parents,t,n)}_t.prototype.interrupt=Ui;_t.prototype.transition=Zo;const ln=Math.PI,un=2*ln,U=1e-6,Qo=un-U;function _e(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function Jo(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return _e;const e=10**n;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*e)/e+r[i]}}class jo{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?_e:Jo(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,r,i){this._append`Q${+n},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(n,e,r,i,o,s){this._append`C${+n},${+e},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(n,e,r,i,o){if(n=+n,e=+e,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,c=this._y1,a=r-n,l=i-e,u=s-n,h=c-e,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(f>U)if(!(Math.abs(h*a-l*u)>U)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let g=r-s,y=i-c,_=a*a+l*l,I=g*g+y*y,Z=Math.sqrt(_),M=Math.sqrt(f),L=o*Math.tan((ln-Math.acos((_+f-I)/(2*Z*M)))/2),d=L/M,m=L/Z;Math.abs(d-1)>U&&this._append`L${n+d*u},${e+d*h}`,this._append`A${o},${o},0,0,${+(h*g>u*y)},${this._x1=n+m*a},${this._y1=e+m*l}`}}arc(n,e,r,i,o,s){if(n=+n,e=+e,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),a=r*Math.sin(i),l=n+c,u=e+a,h=1^s,f=s?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>U||Math.abs(this._y1-u)>U)&&this._append`L${l},${u}`,r&&(f<0&&(f=f%un+un),f>Qo?this._append`A${r},${r},0,1,${h},${n-c},${e-a}A${r},${r},0,1,${h},${this._x1=l},${this._y1=u}`:f>U&&this._append`A${r},${r},0,${+(f>=ln)},${h},${this._x1=n+r*Math.cos(o)},${this._y1=e+r*Math.sin(o)}`)}rect(n,e,r,i){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function ts(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function ns(t,n){return fetch(t,n).then(ts)}function es(t){return(n,e)=>ns(n,e).then(r=>new DOMParser().parseFromString(r,t))}const rs=es("application/xml");function st(t,n,e){this.k=t,this.x=n,this.y=e}st.prototype={constructor:st,scale:function(t){return t===1?this:new st(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new st(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};st.prototype;class q{constructor(n,e,r,i,o,s,c){$n(this,"dragged",n=>{this.sensor.attr("transform","translate("+[n.sourceEvent.offsetX,n.sourceEvent.offsetY]+") scale("+this.scale+")")});this.id=n,this.svgContainer=e,this.url=r,this.sensor,this.scale=i,this.offsetX=s,this.offsetY=c,this.movable=o,console.log("Component created: "+this.id),console.log("url: "+this.url),console.log("scale: "+this.scale)}async load(){if(b("#"+this.id).node()!=null)return;const n=await rs(this.url);this.sensor=this.svgContainer.append("g").attr("transform","translate("+[this.offsetX,this.offsetY]+") scale("+this.scale+")").attr("id",this.id),this.sensor.node().append(b(n.documentElement).node()),this.movable&&this.sensor.call(gi().on("start",this.dragstarted).on("drag",this.dragged).on("end",this.dragended))}dragstarted(n){b(this).raise().classed("active",!0)}dragended(n){b(this).classed("active",!1)}}const H=["connector0pin-0","connector1pin-1","connector2pin-3","connector3pin-7","connector4pin-4","connector5pin-1","connector6pin-1","connector7pin-3","connector8pin-0","connector9pin-3","connector10pin-2","connector11pin-1","connector12pin-7","connector13pin-5","connector14pin-6","connector15pin-5","connector16pin-4","connector17pin-2","connector18pin-2","connector19pin-1","connector20pin-7","connector21pin-2","connector22pin-4","connector23pin-1","connector24pin-6","connector25pin-5","connector26pin-7","connector27pin-8","connector28pin-5","connector29pin-9","connector30pin-2","connector31pin-7","connector32pin-3","connector33pin-6","connector34pin-4","connector35pin-7","connector36pin-9","connector37pin-7","connector38pin-2","connector39pin-2"],xe=["1kresistor_pin_1","1kresistor_pin_2"],Nt={"1kresistor_pin_1":"Led cathode","1kresistor_pin_2":"Led Anode"},we=["res_pin1","res_pin2"],It={res_pin1:"Resistor pin 1",res_pin2:"Resistor pin 2"},ve=["hc05_key_pin","hc05_vcc_pin","hc05_gnd_pin","hc05_txd_pin","hc05_rxd_pin","hc05_state_pin"],Pt={hc05_key_pin:"Key pin of HC-05",hc05_vcc_pin:"Vcc pin of HC-05",hc05_gnd_pin:"GND pin of HC-05",hc05_txd_pin:"TXD pin of HC-05",hc05_rxd_pin:"RXD pin of HC-05",hc05_state_pin:"State pin of HC-05"},T={"connector0pin-0":"GPO","connector1pin-1":"GP1","connector2pin-3":"GND","connector3pin-7":"GP2","connector4pin-4":"GP3","connector5pin-1":"GP4","connector6pin-1":"GP5","connector7pin-3":"GND","connector8pin-0":"GP6","connector9pin-3":"GP7","connector10pin-2":"GP8","connector11pin-1":"GP9","connector12pin-7":"GND","connector13pin-5":"GP10","connector14pin-6":"GP11","connector15pin-5":"GP12","connector16pin-4":"GP13","connector17pin-2":"GND","connector18pin-2":"GP14","connector19pin-1":"GP15","connector20pin-7":"GP16","connector21pin-2":"GP17","connector22pin-4":"GND","connector23pin-1":"GP18","connector24pin-6":"GP19","connector25pin-5":"GP20","connector26pin-7":"GP21","connector27pin-8":"GND","connector28pin-5":"GP22","connector29pin-9":"RUN","connector30pin-2":"GP26/A0","connector31pin-7":"GP27/A1","connector32pin-3":"ADC GND","connector33pin-6":"GP28/A2","connector34pin-4":"ADC VRef","connector35pin-7":"3V4 OUT","connector36pin-9":"3V3 EN","connector37pin-7":"GND","connector38pin-2":"VSYS","connector39pin-2":"VBUS"},is=t=>{if(t.length==0)return{error:"No connection found"};const n=["1kresistor_pin_1","1kresistor_pin_2","res_pin1","res_pin2","hc05_vcc_pin","hc05_gnd_pin","hc05_txd_pin","hc05_rxd_pin"];let e=0;return t.forEach(r=>{if(n.find(i=>i==r.connector)){e++,console.log("req",e);return}if(T[r.connector]=="GND"){e++,console.log("gnd",e);return}if(T[r.connector]=="GP0"){e++,console.log("GP1",e);return}if(T[r.connector]=="GP1"){e++,console.log("GP2",e);return}if(T[r.connector]=="VBUS"){e++,console.log("VBUS",e);return}if(H[r.connector]&&T[r.connector].includes("GP19")){e++;return}}),console.log(e,"total"),e==10};class os{constructor(n){this.logLocationId=n,this.connections=[]}addConnection(n){this.connections.push(n),this.logConnectionsToHtml()}undoLastConnection(){if(this.connections.length){const n=this.connections.pop(),e=document.getElementById(this.logLocationId),r=e.lastChild;e.removeChild(r),this.logConnectionsToHtml(),console.log("Removed connection:",n)}else console.warn("No more connections to undo")}logConnectionsToHtml(){if(this.connections.length%2===0){let n=document.createElement("li");const e=T[this.connections[this.connections.length-2].connector]?`${T[this.connections[this.connections.length-2].connector]} pin of Raspberry Pi`:Nt[this.connections[this.connections.length-2].connector]?Nt[this.connections[this.connections.length-2].connector]:It[this.connections[this.connections.length-2].connector]?It[this.connections[this.connections.length-2].connector]:Pt[this.connections[this.connections.length-2].connector]?Pt[this.connections[this.connections.length-2].connector]:this.connections[this.connections.length-2].connector,r=T[this.connections[this.connections.length-1].connector]?`${T[this.connections[this.connections.length-1].connector]} pin of Raspberry Pi`:Nt[this.connections[this.connections.length-1].connector]?Nt[this.connections[this.connections.length-1].connector]:It[this.connections[this.connections.length-1].connector]?It[this.connections[this.connections.length-1].connector]:Pt[this.connections[this.connections.length-1].connector]?Pt[this.connections[this.connections.length-1].connector]:this.connections[this.connections.length-1].connector;n.innerHTML=`Connection no. ${this.connections.length/2}: ${e} to ${r}`,document.getElementById(this.logLocationId).appendChild(n);return}}getConnectionLog(){return this.connections}}class ss{constructor(n,e,r,i){this.id=n,this.headingId=e,this.textId=r,this.closeButtonId=i,document.getElementById(this.closeButtonId).addEventListener("click",()=>{document.getElementById(this.id).style.display="none"})}throw(n,e){document.getElementById(this.id).style.display="flex",document.getElementById(this.headingId).innerHTML=n,document.getElementById(this.textId).innerHTML=e}}const Y=document.getElementById("svg");Y||console.error("SVG container not found");const G=(Y==null?void 0:Y.offsetWidth)||window.innerWidth,cs=(Y!=null&&Y.offsetTop?window.innerHeight-Y.offsetTop:window.innerHeight)||400,as=window.innerWidth<850,Vn={desktop:{raspberry:{scale:.6,x:0,y:0},sensor:{scale:.45,x:400,y:0},led:{scale:.25,x:400,y:100},resistor:{scale:.45,x:300,y:200},object:{scale:.6,x:800,y:50},bluetooth:{scale:.6,x:800,y:50},phone:{scale:.6,x:800,y:50},bconnect:{scale:.6,x:800,y:50}},mobile:{raspberry:{scale:.15,x:G*.1,y:10},sensor:{scale:.15,x:G*.3,y:10},led:{scale:.15,x:G*.3,y:60},resistor:{scale:.15,x:G*.2,y:90},object:{scale:.15,x:G*.5,y:20},bluetooth:{scale:.15,x:G*.5,y:20},phone:{scale:.15,x:G*.5,y:20},bconnect:{scale:.15,x:G*.5,y:20}}},p=as?Vn.mobile:Vn.desktop,ls=Math.max(p.raspberry.x+400*p.raspberry.scale,p.sensor.x+200*p.sensor.scale,p.led.x+100*p.led.scale,p.resistor.x+100*p.resistor.scale,p.object.x+100*p.object.scale,p.bluetooth.x+100*p.bluetooth.scale,p.phone.x+100*p.phone.scale,p.bconnect.x+100*p.bconnect.scale),us=Math.max(p.raspberry.y+200*p.raspberry.scale,p.sensor.y+100*p.sensor.scale,p.led.y+100*p.led.scale,p.resistor.y+100*p.resistor.scale,p.object.y+100*p.object.scale,p.bluetooth.y+100*p.bluetooth.scale,p.phone.y+100*p.phone.scale,p.bconnect.y+100*p.bconnect.scale),fs=Math.max(G,ls+50),hs=Math.max(cs,us+50),x=b("#svg").append("svg").attr("id","svgContainer").attr("viewBox",`0 0 ${fs} ${hs}`).attr("preserveAspectRatio","xMidYMid meet").style("width","100%").style("height","auto"),Yn=(t,n)=>{xn.append("path").attr("d",t).attr("stroke","black").attr("stroke-width","2px").attr("fill","none").attr("id",n)},Fn=(t,n,e)=>{x.append("circle").attr("cx",t).attr("cy",n).attr("r",3).attr("fill","black").attr("id",e)},ds=new q("raspberry",x,"images/pico.svg",p.raspberry.scale,!1,p.raspberry.x,p.raspberry.y),ps=new q("ultraSonicsensor",x,"images/sensor1.svg",p.sensor.scale,!1,p.sensor.x,p.sensor.y),gs=new q("ledlight",x,"images/led.svg",p.led.scale,!1,p.led.x,p.led.y),ms=new q("resistor220",x,"images/resistor.svg",p.resistor.scale,!1,p.resistor.x,p.resistor.y),ys=new q("box",x,"images/box.svg",p.object.scale,!1,p.object.x,p.object.y),_s=new q("bluetooth",x,"images/box1.svg",p.bluetooth.scale,!1,p.bluetooth.x,p.bluetooth.y),xs=new q("phone",x,"images/Group11.svg",p.phone.scale,!1,p.phone.x,p.phone.y),ws=new q("bconnect",x,"images/start.svg",p.bconnect.scale,!1,p.bconnect.x,p.bconnect.y),xn=x.append("g").attr("id","pathsGroup"),wt={rasberryPi:"Raspberry Pi Pico: A microcontroller board for low-cost, high-performance projects. It powers and controls the circuit, with VBUS providing 5V to the HC-05, GP0 and GP1 handling Bluetooth communication, and GP19 driving the LED via the resistor.",sensor:"HC-05 Bluetooth Module: Enables wireless communication with devices. It connects to the Raspberry Pi Pico via VCC to VBUS for power, TX to GP0 and RX to GP1 for data transfer, and GND to ground, enabling smartphone control of the LED.",resistor:"Resistor: Limits current flow to protect the LED in the circuit. It connects between the LEDs positive terminal and GP19 on the Raspberry Pi Pico to regulate current, preventing damage to the LED.",led:"LED: A light-emitting diode that lights up when powered. Its positive terminal connects to the resistor (linked to GP19) for current control, and its negative terminal connects to GND on the Raspberry Pi Pico. Shows light yellow when turned on.",object:"Smartphone: Used to control the LED via Bluetooth connection. It pairs with the HC-05 module (connected to the Pico) to send commands, turning the LED on or off wirelessly after Bluetooth is enabled and the Raspberry Pi is selected."},ct=document.getElementById("rasberryPi"),at=document.getElementById("sensor"),lt=document.getElementById("led"),ut=document.getElementById("resistor"),ft=document.getElementById("object"),Tt=document.getElementById("info"),fn=document.getElementById("list"),yt=document.getElementById("displayInfo"),Bt=document.getElementById("codeSubmit"),J=document.getElementById("componentDescription"),Rt=document.getElementById("undoButton"),Qt=document.getElementById("closeCodeDrawer"),Jt=document.getElementById("codeButton"),jt=document.getElementById("resetButton");ct||console.error("Raspberry Pi component not found");at||console.error("Sensor component not found");lt||console.error("LED component not found");ut||console.error("Resistor component not found");ft||console.error("Object component not found");Tt||console.error("Info button not found");fn||console.error("List element not found");yt||console.error("Display info element not found");Bt||console.error("Code submit button not found");Rt||console.error("Undo button not found");ct==null||ct.addEventListener("click",async()=>{console.log("Raspberry Pi clicked"),await ds.load()});at==null||at.addEventListener("click",()=>{console.log("Sensor clicked"),ps.load()});lt==null||lt.addEventListener("click",()=>{console.log("LED clicked"),gs.load();const t=document.getElementById("ledLight");t&&(t.style.fill="black")});ut==null||ut.addEventListener("click",()=>{console.log("Resistor clicked"),ms.load()});ft==null||ft.addEventListener("click",async()=>{var r;console.log("Object clicked"),await xs.load(),await ys.load(),await _s.load(),await ws.load();const t=document.getElementById("hide"),n=document.getElementById("devices"),e=document.getElementById("device");t&&(t.style.display="none"),n&&(n.style.display="none"),e&&(e.style.display="none"),(r=document.getElementById("svgContainer"))==null||r.addEventListener("click",i=>{if(console.log("SVG container clicked, target ID:",i.target.id),i.target.id==="buttonIdInSvg"){const o=document.getElementById("box");o&&(o.style.display="none")}if(i.target.id==="icon"){const o=document.getElementById("bconnect");o&&(o.style.display="none")}if(i.target.id==="on"){const o=document.getElementById("on"),s=document.getElementById("off");o&&(o.style.fill="green"),s&&(s.style.display="none"),t&&(t.style.display=""),n&&(n.style.display=""),e&&(e.style.display="")}if(i.target.id==="devices"){const o=document.getElementById("bluetooth");o&&(o.style.display="none")}})});const vt=(t,n)=>{t==null||t.addEventListener("mouseover",()=>{console.log("Hovering over component:",n),J&&(J.textContent=n,J.style.display="block")}),t==null||t.addEventListener("mouseout",()=>{console.log("Mouse out from component"),J&&(J.textContent="Hover over a component to see its description.",J.style.display="none")})};vt(ct,wt.rasberryPi);vt(at,wt.sensor);vt(lt,wt.led);vt(ut,wt.resistor);vt(ft,wt.object);let At=!1;Tt==null||Tt.addEventListener("click",()=>{console.log("Info button clicked, showList:",At),At=!At,fn&&(fn.style.display=At?"block":"none")});Jt==null||Jt.addEventListener("click",()=>{console.log("Code button clicked");const t=document.getElementById("my-drawer-4");t&&(t.checked=!0)});jt==null||jt.addEventListener("click",()=>{console.log("Reset button clicked"),window.location.href=window.location.href});Rt==null||Rt.addEventListener("click",()=>{console.log("Undo button clicked"),F.undoLastConnection(),bs()});Qt==null||Qt.addEventListener("click",()=>{console.log("Close code drawer button clicked");const t=document.getElementById("my-drawer-4");t&&(t.checked=!1)});Bt==null||Bt.addEventListener("click",()=>{console.log("Code submit button clicked");const t=is(F.getConnectionLog());if(t===!0){const n=document.getElementById("ledLight");if(!n){console.error("LED element not found");return}x.on("click",e=>{b(n).interrupt(),e.target.id==="ledon"?b(n).style("fill","lightyellow").style("animation","blink 1s infinite"):e.target.id==="ledoff"&&b(n).style("fill","black").style("animation","none")})}else t.error?Un.throw("Error",t.error):Un.throw("Error","Please connect the components properly. Refer to the connection diagram.")});const qn=t=>H.includes(t.srcElement.id)||xe.includes(t.srcElement.id)||we.includes(t.srcElement.id)||ve.includes(t.srcElement.id);let C;const F=new os("connectionLog"),Un=new ss("errorBox","errorHeading","errorText","closeErrorBox");let N=0;const vs=t=>{xn.selectAll(`path[id="${t}"]`).nodes().forEach(e=>e.remove())},bs=()=>{if(C){xn.selectAll(`path[id^="path${N}"]`).nodes().forEach(e=>e.remove());const n=x.select(`#marker-start-${N}`);n.empty()||n.remove(),C=null,console.log("Removed all incomplete paths and markers");return}if(F.connections.length>0){const t=F.connections[F.connections.length-1],n=t.lineID,e=parseInt(n.replace("path",""));vs(n);const r=x.select(`#marker-start-${e}`);r.empty()||r.remove();const i=x.select(`#marker-end-${e}`);r.empty()||i.remove(),H.includes(t.connector)&&b(`#${t.connector}`).style("fill","#9a916c"),t.connectorEnd&&H.includes(t.connectorEnd)&&b(`#${t.connectorEnd}`).style("fill","#9a916c"),F.connections.pop(),console.log(`Removed paths and markers with line ID: ${n}`)}else console.warn("No more connections to undo")};x.on("dblclick",t=>{if(console.log("SVG double-clicked, target ID:",t.srcElement.id),qn(t)&&!C){C=new jo,C.moveTo(t.offsetX,t.offsetY),H.includes(t.srcElement.id)?b(`#${t.srcElement.id}`).style("fill","black"):Fn(t.offsetX,t.offsetY,`marker-start-${N}`),F.addConnection({lineID:`path${N}`,x:t.offsetX,y:t.offsetY,connector:t.srcElement.id,connectorEnd:null,incomplete:!0}),x.style("cursor","crosshair"),console.log("path created 0"),console.log(N,"path count");return}if(t.srcElement.id==="svgContainer"&&!H.includes(t.srcElement.id)){C&&(C.lineTo(t.offsetX,t.offsetY),Yn(C.toString(),`path${N}`),console.log("path created"),console.log(N));return}if(qn(t)&&C){C.lineTo(t.offsetX,t.offsetY),Yn(C.toString(),`path${N}`),H.includes(t.srcElement.id)?b(`#${t.srcElement.id}`).style("fill","black"):Fn(t.offsetX,t.offsetY,`marker-end-${N}`),F.addConnection({lineID:`path${N}`,x:t.offsetX,y:t.offsetY,connector:t.srcElement.id,connectorEnd:t.srcElement.id,incomplete:!1}),N++,x.style("cursor","default"),C=null,console.log("path created 2"),console.log(N);return}});x.on("mouseover",t=>{H.includes(t.srcElement.id)&&(console.log("Mouseover connector:",t.srcElement.id),yt&&(yt.innerHTML=T[t.srcElement.id]))});x.on("mouseout",t=>{(H.includes(t.srcElement.id)||xe.includes(t.srcElement.id)||we.includes(t.srcElement.id)||ve.includes(t.srcElement.id))&&(console.log("Mouseout connector"),yt&&(yt.innerHTML="CONNECTOR INFO"))});document.getElementById("backButton").addEventListener("click",function(){document.getElementById("my-drawer-4").checked=!1});
